<!DOCTYPE html SYSTEM "about:legacy-compat">
<html lang="en-US" data-preset="contrast" data-primary-color="#3F56CE"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="UTF-8"><meta name="built-on" content="2025-01-16T12:29:51.7137061"><title>Request [Viewmodel] | Voci App Documentation</title><script type="application/json" id="virtual-toc-data">[{"id":"state-variables","level":0,"title":"State Variables","anchor":"#state-variables"},{"id":"methods","level":0,"title":"Methods","anchor":"#methods"},{"id":"firebase-auth-listener","level":0,"title":"Firebase Auth Listener","anchor":"#firebase-auth-listener"},{"id":"dependencies","level":0,"title":"Dependencies","anchor":"#dependencies"}]</script><script type="application/json" id="topic-shortcuts"></script><link href="https://resources.jetbrains.com/writerside/apidoc/6.10.0-b575/app.css" rel="stylesheet"><link rel="icon" type="image/png" sizes="16x16" href="images/voci-logo.png"><meta name="image" content=""><!-- Open Graph --><meta property="og:title" content="Request [Viewmodel] | Voci App Documentation"><meta property="og:description" content=""><meta property="og:image" content=""><meta property="og:site_name" content="Voci App Documentation Help"><meta property="og:type" content="website"><meta property="og:locale" content="en_US"><meta property="og:url" content="writerside-documentation/request-viewmodel.html"><!-- End Open Graph --><!-- Twitter Card --><meta name="twitter:card" content="summary_large_image"><meta name="twitter:site" content=""><meta name="twitter:title" content="Request [Viewmodel] | Voci App Documentation"><meta name="twitter:description" content=""><meta name="twitter:creator" content=""><meta name="twitter:image:src" content=""><!-- End Twitter Card --><!-- Schema.org WebPage --><script type="application/ld+json">{
    "@context": "http://schema.org",
    "@type": "WebPage",
    "@id": "writerside-documentation/request-viewmodel.html#webpage",
    "url": "writerside-documentation/request-viewmodel.html",
    "name": "Request [Viewmodel] | Voci App Documentation",
    "description": "",
    "image": "",
    "inLanguage":"en-US"
}</script><!-- End Schema.org --><!-- Schema.org WebSite --><script type="application/ld+json">{
    "@type": "WebSite",
    "@id": "writerside-documentation/#website",
    "url": "writerside-documentation/",
    "name": "Voci App Documentation Help"
}</script><!-- End Schema.org --></head><body data-id="Request-Viewmodel" data-main-title="Request [Viewmodel]" data-article-props="{&quot;seeAlsoStyle&quot;:&quot;links&quot;}" data-template="article" data-breadcrumbs="App.md|App///Ui-Package.md|User Interface (UI) [Package]///Viewmodels.md|Viewmodels [Package]"><div class="wrapper"><main class="panel _main"><header class="panel__header"><div class="container"><h3>Voci App Documentation  Help</h3><div class="panel-trigger"></div></div></header><section class="panel__content"><div class="container"><article class="article" data-shortcut-switcher="inactive"><h1 data-toc="Request-Viewmodel" id="Request-Viewmodel.md">Request [Viewmodel]</h1><p id="-xd5a6m_3">The <code class="code" id="-xd5a6m_8">RequestViewModel</code> class manages the state and logic for handling requests in the application. It acts as a bridge between the UI and the data layer, ensuring that data is retrieved, updated, and properly maintained.</p><section class="chapter"><h2 id="state-variables" data-toc="state-variables">State Variables</h2><section class="chapter"><h3 id="snackbar-message" data-toc="snackbar-message">Snackbar Message</h3><ul class="list _bullet" id="-xd5a6m_16"><li class="list__item" id="-xd5a6m_17"><p><span class="control" id="-xd5a6m_21">Variable:</span> <code class="code" id="-xd5a6m_22">_snackbarMessage</code></p></li><li class="list__item" id="-xd5a6m_18"><p><span class="control" id="-xd5a6m_23">Public Access:</span> <code class="code" id="-xd5a6m_24">snackbarMessage</code></p></li><li class="list__item" id="-xd5a6m_19"><p><span class="control" id="-xd5a6m_25">Type:</span> <code class="code" id="-xd5a6m_26">StateFlow&lt;String&gt;</code></p></li><li class="list__item" id="-xd5a6m_20"><p><span class="control" id="-xd5a6m_27">Description:</span> Holds the message to be displayed in the snackbar. Updated when a user action occurs (e.g., adding, updating, or deleting a request).</p></li></ul></section><section class="chapter"><h3 id="requests" data-toc="requests">Requests</h3><ul class="list _bullet" id="-xd5a6m_28"><li class="list__item" id="-xd5a6m_29"><p><span class="control" id="-xd5a6m_33">Variable:</span> <code class="code" id="-xd5a6m_34">_requests</code></p></li><li class="list__item" id="-xd5a6m_30"><p><span class="control" id="-xd5a6m_35">Public Access:</span> <code class="code" id="-xd5a6m_36">requests</code></p></li><li class="list__item" id="-xd5a6m_31"><p><span class="control" id="-xd5a6m_37">Type:</span> <code class="code" id="-xd5a6m_38">StateFlow&lt;Resource&lt;List&lt;Request&gt;&gt;&gt;</code></p></li><li class="list__item" id="-xd5a6m_32"><p><span class="control" id="-xd5a6m_39">Description:</span> Contains the full list of requests fetched from the repository. Supports loading, success, and error states.</p></li></ul></section><section class="chapter"><h3 id="active-requests" data-toc="active-requests">Active Requests</h3><ul class="list _bullet" id="-xd5a6m_40"><li class="list__item" id="-xd5a6m_41"><p><span class="control" id="-xd5a6m_45">Variable:</span> <code class="code" id="-xd5a6m_46">_activeRequests</code></p></li><li class="list__item" id="-xd5a6m_42"><p><span class="control" id="-xd5a6m_47">Public Access:</span> <code class="code" id="-xd5a6m_48">activeRequests</code></p></li><li class="list__item" id="-xd5a6m_43"><p><span class="control" id="-xd5a6m_49">Type:</span> <code class="code" id="-xd5a6m_50">StateFlow&lt;Resource&lt;List&lt;Request&gt;&gt;&gt;</code></p></li><li class="list__item" id="-xd5a6m_44"><p><span class="control" id="-xd5a6m_51">Description:</span> Contains a list of active requests filtered from the full list.</p></li></ul></section><section class="chapter"><h3 id="completed-requests" data-toc="completed-requests">Completed Requests</h3><ul class="list _bullet" id="-xd5a6m_52"><li class="list__item" id="-xd5a6m_53"><p><span class="control" id="-xd5a6m_57">Variable:</span> <code class="code" id="-xd5a6m_58">_completedRequests</code></p></li><li class="list__item" id="-xd5a6m_54"><p><span class="control" id="-xd5a6m_59">Public Access:</span> <code class="code" id="-xd5a6m_60">completedRequests</code></p></li><li class="list__item" id="-xd5a6m_55"><p><span class="control" id="-xd5a6m_61">Type:</span> <code class="code" id="-xd5a6m_62">StateFlow&lt;Resource&lt;List&lt;Request&gt;&gt;&gt;</code></p></li><li class="list__item" id="-xd5a6m_56"><p><span class="control" id="-xd5a6m_63">Description:</span> Contains a list of completed requests filtered from the full list.</p></li></ul></section><section class="chapter"><h3 id="request-by-id" data-toc="request-by-id">Request by ID</h3><ul class="list _bullet" id="-xd5a6m_64"><li class="list__item" id="-xd5a6m_65"><p><span class="control" id="-xd5a6m_69">Variable:</span> <code class="code" id="-xd5a6m_70">_requestById</code></p></li><li class="list__item" id="-xd5a6m_66"><p><span class="control" id="-xd5a6m_71">Public Access:</span> <code class="code" id="-xd5a6m_72">requestById</code></p></li><li class="list__item" id="-xd5a6m_67"><p><span class="control" id="-xd5a6m_73">Type:</span> <code class="code" id="-xd5a6m_74">StateFlow&lt;Resource&lt;Request&gt;&gt;</code></p></li><li class="list__item" id="-xd5a6m_68"><p><span class="control" id="-xd5a6m_75">Description:</span> Contains details for a specific request identified by its ID.</p></li></ul></section><section class="chapter"><h3 id="requests-by-homeless-id" data-toc="requests-by-homeless-id">Requests by Homeless ID</h3><ul class="list _bullet" id="-xd5a6m_76"><li class="list__item" id="-xd5a6m_77"><p><span class="control" id="-xd5a6m_81">Variable:</span> <code class="code" id="-xd5a6m_82">_requestsByHomelessId</code></p></li><li class="list__item" id="-xd5a6m_78"><p><span class="control" id="-xd5a6m_83">Public Access:</span> <code class="code" id="-xd5a6m_84">requestsByHomelessId</code></p></li><li class="list__item" id="-xd5a6m_79"><p><span class="control" id="-xd5a6m_85">Type:</span> <code class="code" id="-xd5a6m_86">StateFlow&lt;Resource&lt;List&lt;Request&gt;&gt;&gt;</code></p></li><li class="list__item" id="-xd5a6m_80"><p><span class="control" id="-xd5a6m_87">Description:</span> Contains requests filtered by a specific homeless individual's ID.</p></li></ul></section><section class="chapter"><h3 id="firebase-auth" data-toc="firebase-auth">Firebase Auth</h3><ul class="list _bullet" id="-xd5a6m_88"><li class="list__item" id="-xd5a6m_90"><p><span class="control" id="-xd5a6m_93">Variable:</span> <code class="code" id="-xd5a6m_94">firebaseAuth</code></p></li><li class="list__item" id="-xd5a6m_91"><p><span class="control" id="-xd5a6m_95">Type:</span> <code class="code" id="-xd5a6m_96">FirebaseAuth</code></p></li><li class="list__item" id="-xd5a6m_92"><p><span class="control" id="-xd5a6m_97">Description:</span> Tracks the Firebase authentication state to fetch requests for authenticated users.</p></li></ul></section></section><section class="chapter"><h2 id="methods" data-toc="methods">Methods</h2><section class="chapter"><h3 id="fetchrequests" data-toc="fetchrequests">fetchRequests</h3><ul class="list _bullet" id="-xd5a6m_110"><li class="list__item" id="-xd5a6m_111"><p><span class="control" id="-xd5a6m_113">Description:</span> Fetches requests from Firestore and updates the local Room database.</p></li><li class="list__item" id="-xd5a6m_112"><p><span class="control" id="-xd5a6m_114">Usage:</span> Called during Firebase authentication state changes or initialization.</p></li></ul></section><section class="chapter"><h3 id="getrequests" data-toc="getrequests">getRequests</h3><ul class="list _bullet" id="-xd5a6m_115"><li class="list__item" id="-xd5a6m_116"><p><span class="control" id="-xd5a6m_117">Description:</span> Retrieves the list of requests from the local database and updates the <code class="code" id="-xd5a6m_118">_requests</code> state variable. Also triggers fetching active and completed requests.</p></li></ul></section><section class="chapter"><h3 id="getactiverequests" data-toc="getactiverequests">getActiveRequests</h3><ul class="list _bullet" id="-xd5a6m_119"><li class="list__item" id="-xd5a6m_120"><p><span class="control" id="-xd5a6m_121">Description:</span> Retrieves active requests from the local database and updates the <code class="code" id="-xd5a6m_122">_activeRequests</code> state variable.</p></li></ul></section><section class="chapter"><h3 id="getcompletedrequests" data-toc="getcompletedrequests">getCompletedRequests</h3><ul class="list _bullet" id="-xd5a6m_123"><li class="list__item" id="-xd5a6m_124"><p><span class="control" id="-xd5a6m_125">Description:</span> Retrieves completed requests from the local database and updates the <code class="code" id="-xd5a6m_126">_completedRequests</code> state variable.</p></li></ul></section><section class="chapter"><h3 id="getrequestbyid" data-toc="getrequestbyid">getRequestById</h3><ul class="list _bullet" id="-xd5a6m_127"><li class="list__item" id="-xd5a6m_128"><p><span class="control" id="-xd5a6m_130">Description:</span> Retrieves a specific request by its ID from the local database and updates the <code class="code" id="-xd5a6m_131">_requestById</code> state variable.</p></li><li class="list__item" id="-xd5a6m_129"><p><span class="control" id="-xd5a6m_132">Parameters:</span></p><ul class="list _bullet" id="-xd5a6m_133"><li class="list__item" id="-xd5a6m_134"><p><code class="code" id="-xd5a6m_135">requestId</code>: <code class="code" id="-xd5a6m_136">String</code> - The ID of the request to fetch.</p></li></ul></li></ul></section><section class="chapter"><h3 id="getrequestsbyhomelessid" data-toc="getrequestsbyhomelessid">getRequestsByHomelessId</h3><ul class="list _bullet" id="-xd5a6m_137"><li class="list__item" id="-xd5a6m_138"><p><span class="control" id="-xd5a6m_140">Description:</span> Retrieves requests associated with a specific homeless individual's ID and updates the <code class="code" id="-xd5a6m_141">_requestsByHomelessId</code> state variable.</p></li><li class="list__item" id="-xd5a6m_139"><p><span class="control" id="-xd5a6m_142">Parameters:</span></p><ul class="list _bullet" id="-xd5a6m_143"><li class="list__item" id="-xd5a6m_144"><p><code class="code" id="-xd5a6m_145">homelessId</code>: <code class="code" id="-xd5a6m_146">String</code> - The ID of the homeless individual.</p></li></ul></li></ul></section><section class="chapter"><h3 id="addrequest" data-toc="addrequest">addRequest</h3><ul class="list _bullet" id="-xd5a6m_147"><li class="list__item" id="-xd5a6m_148"><p><span class="control" id="-xd5a6m_150">Description:</span> Adds a new request to the local database. Updates the snackbar message and refreshes the requests list.</p></li><li class="list__item" id="-xd5a6m_149"><p><span class="control" id="-xd5a6m_151">Parameters:</span></p><ul class="list _bullet" id="-xd5a6m_152"><li class="list__item" id="-xd5a6m_153"><p><code class="code" id="-xd5a6m_154">request</code>: <code class="code" id="-xd5a6m_155">Request</code> - The request object to be added.</p></li></ul></li></ul></section><section class="chapter"><h3 id="updaterequest" data-toc="updaterequest">updateRequest</h3><ul class="list _bullet" id="-xd5a6m_156"><li class="list__item" id="-xd5a6m_157"><p><span class="control" id="-xd5a6m_159">Description:</span> Updates an existing request in the local database. Refreshes the requests list.</p></li><li class="list__item" id="-xd5a6m_158"><p><span class="control" id="-xd5a6m_160">Parameters:</span></p><ul class="list _bullet" id="-xd5a6m_161"><li class="list__item" id="-xd5a6m_162"><p><code class="code" id="-xd5a6m_163">request</code>: <code class="code" id="-xd5a6m_164">Request</code> - The updated request object.</p></li></ul></li></ul></section><section class="chapter"><h3 id="deleterequest" data-toc="deleterequest">deleteRequest</h3><ul class="list _bullet" id="-xd5a6m_165"><li class="list__item" id="-xd5a6m_166"><p><span class="control" id="-xd5a6m_168">Description:</span> Deletes a request from the local database. Updates the snackbar message and refreshes the requests list.</p></li><li class="list__item" id="-xd5a6m_167"><p><span class="control" id="-xd5a6m_169">Parameters:</span></p><ul class="list _bullet" id="-xd5a6m_170"><li class="list__item" id="-xd5a6m_171"><p><code class="code" id="-xd5a6m_172">request</code>: <code class="code" id="-xd5a6m_173">Request</code> - The request object to be deleted.</p></li></ul></li></ul></section><section class="chapter"><h3 id="requestdone" data-toc="requestdone">requestDone</h3><ul class="list _bullet" id="-xd5a6m_174"><li class="list__item" id="-xd5a6m_175"><p><span class="control" id="-xd5a6m_177">Description:</span> Marks a request's status as &quot;DONE&quot; and updates it in the local database.</p></li><li class="list__item" id="-xd5a6m_176"><p><span class="control" id="-xd5a6m_178">Parameters:</span></p><ul class="list _bullet" id="-xd5a6m_179"><li class="list__item" id="-xd5a6m_180"><p><code class="code" id="-xd5a6m_181">request</code>: <code class="code" id="-xd5a6m_182">Request</code> - The request to mark as done.</p></li></ul></li></ul></section><section class="chapter"><h3 id="requesttodo" data-toc="requesttodo">requestTodo</h3><ul class="list _bullet" id="-xd5a6m_183"><li class="list__item" id="-xd5a6m_184"><p><span class="control" id="-xd5a6m_186">Description:</span> Marks a request's status as &quot;TODO&quot; and updates it in the local database.</p></li><li class="list__item" id="-xd5a6m_185"><p><span class="control" id="-xd5a6m_187">Parameters:</span></p><ul class="list _bullet" id="-xd5a6m_188"><li class="list__item" id="-xd5a6m_189"><p><code class="code" id="-xd5a6m_190">request</code>: <code class="code" id="-xd5a6m_191">Request</code> - The request to mark as TODO.</p></li></ul></li></ul></section><section class="chapter"><h3 id="clearsnackbarmessage" data-toc="clearsnackbarmessage">clearSnackbarMessage</h3><ul class="list _bullet" id="-xd5a6m_192"><li class="list__item" id="-xd5a6m_194"><p><span class="control" id="-xd5a6m_195">Description:</span> Clears the snackbar message state.</p></li></ul></section></section><section class="chapter"><h2 id="firebase-auth-listener" data-toc="firebase-auth-listener">Firebase Auth Listener</h2><ul class="list _bullet" id="-xd5a6m_196"><li class="list__item" id="-xd5a6m_198"><p><span class="control" id="-xd5a6m_199">Description:</span></p><ul class="list _bullet" id="-xd5a6m_200"><li class="list__item" id="-xd5a6m_201"><p>Monitors the authentication state of the user. Automatically fetches requests when a user signs in or updates their authentication state.</p></li></ul></li></ul></section><section class="chapter"><h2 id="dependencies" data-toc="dependencies">Dependencies</h2><ul class="list _bullet" id="-xd5a6m_202"><li class="list__item" id="-xd5a6m_205"><p><span class="control" id="-xd5a6m_207">RequestRepository:</span></p><ul class="list _bullet" id="-xd5a6m_208"><li class="list__item" id="-xd5a6m_209"><p>Handles data operations, including Firestore synchronization and local database updates.</p></li></ul></li><li class="list__item" id="-xd5a6m_206"><p><span class="control" id="-xd5a6m_210">FirebaseAuth:</span></p><ul class="list _bullet" id="-xd5a6m_211"><li class="list__item" id="-xd5a6m_212"><p>Tracks user authentication states.</p></li></ul></li></ul><p id="-xd5a6m_204">This documentation provides an overview of the <code class="code" id="-xd5a6m_213">RequestViewModel</code>, its responsibilities, and how it interacts with state and data. Let me know if further refinements are needed!</p></section><div class="last-modified">Last modified: 16 January 2025</div><div data-feedback-placeholder="true"></div><div class="navigation-links _bottom"><a href="homeless-viewmodel.html" class="navigation-links__prev">Homeless [Viewmodel]</a><a href="updates-viewmodel.html" class="navigation-links__next">Updates [Viewmodel]</a></div></article><div id="disqus_thread"></div></div></section></main></div><script src="https://resources.jetbrains.com/writerside/apidoc/6.10.0-b575/app.js"></script></body></html>