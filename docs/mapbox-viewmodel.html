<!DOCTYPE html SYSTEM "about:legacy-compat">
<html lang="en-US" data-preset="contrast" data-primary-color="#3F56CE"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="UTF-8"><meta name="built-on" content="2025-01-16T16:29:41.303923"><title>Mapbox [Viewmodel] | Voci App Documentation</title><script type="application/json" id="virtual-toc-data">[{"id":"overview","level":0,"title":"Overview","anchor":"#overview"},{"id":"state-variables","level":0,"title":"State Variables","anchor":"#state-variables"},{"id":"methods","level":0,"title":"Methods","anchor":"#methods"},{"id":"dependencies","level":0,"title":"Dependencies","anchor":"#dependencies"}]</script><script type="application/json" id="topic-shortcuts"></script><link href="https://resources.jetbrains.com/writerside/apidoc/6.10.0-b575/app.css" rel="stylesheet"><link rel="icon" type="image/png" sizes="16x16" href="images/voci-logo.png"><meta name="image" content=""><!-- Open Graph --><meta property="og:title" content="Mapbox [Viewmodel] | Voci App Documentation"><meta property="og:description" content=""><meta property="og:image" content=""><meta property="og:site_name" content="Voci App Documentation Help"><meta property="og:type" content="website"><meta property="og:locale" content="en_US"><meta property="og:url" content="writerside-documentation/mapbox-viewmodel.html"><!-- End Open Graph --><!-- Twitter Card --><meta name="twitter:card" content="summary_large_image"><meta name="twitter:site" content=""><meta name="twitter:title" content="Mapbox [Viewmodel] | Voci App Documentation"><meta name="twitter:description" content=""><meta name="twitter:creator" content=""><meta name="twitter:image:src" content=""><!-- End Twitter Card --><!-- Schema.org WebPage --><script type="application/ld+json">{
    "@context": "http://schema.org",
    "@type": "WebPage",
    "@id": "writerside-documentation/mapbox-viewmodel.html#webpage",
    "url": "writerside-documentation/mapbox-viewmodel.html",
    "name": "Mapbox [Viewmodel] | Voci App Documentation",
    "description": "",
    "image": "",
    "inLanguage":"en-US"
}</script><!-- End Schema.org --><!-- Schema.org WebSite --><script type="application/ld+json">{
    "@type": "WebSite",
    "@id": "writerside-documentation/#website",
    "url": "writerside-documentation/",
    "name": "Voci App Documentation Help"
}</script><!-- End Schema.org --></head><body data-id="Mapbox-Viewmodel" data-main-title="Mapbox [Viewmodel]" data-article-props="{&quot;seeAlsoStyle&quot;:&quot;links&quot;}" data-template="article" data-breadcrumbs="App.md|App///Ui-Package.md|User Interface (UI) [Package]///Viewmodels.md|Viewmodels [Package]"><div class="wrapper"><main class="panel _main"><header class="panel__header"><div class="container"><h3>Voci App Documentation  Help</h3><div class="panel-trigger"></div></div></header><section class="panel__content"><div class="container"><article class="article" data-shortcut-switcher="inactive"><h1 data-toc="Mapbox-Viewmodel" id="Mapbox-Viewmodel.md">Mapbox [Viewmodel]</h1><section class="chapter"><h2 id="overview" data-toc="overview">Overview</h2><p id="o2zntt_7"><code class="code" id="o2zntt_8">MapboxViewModel</code> is responsible for handling all interactions with the Mapbox API for geocoding, reverse geocoding, and location suggestions. This ViewModel uses the <code class="code" id="o2zntt_9">MapboxRepository</code> for backend communication and manages state variables to hold results and provide updates to the UI.</p></section><section class="chapter"><h2 id="state-variables" data-toc="state-variables">State Variables</h2><section class="chapter"><h3 id="location-coordinates" data-toc="location-coordinates">Location Coordinates</h3><ul class="list _bullet" id="o2zntt_13"><li class="list__item" id="o2zntt_14"><p><span class="control" id="o2zntt_18">Variable:</span> <code class="code" id="o2zntt_19">_locationCoordinates</code></p></li><li class="list__item" id="o2zntt_15"><p><span class="control" id="o2zntt_20">Type:</span> <code class="code" id="o2zntt_21">MutableStateFlow&lt;Resource&lt;Pair&lt;Double, Double&gt;&gt;&gt;</code></p></li><li class="list__item" id="o2zntt_16"><p><span class="control" id="o2zntt_22">Description:</span> Holds the geocoded latitude and longitude pair for a given address.</p></li><li class="list__item" id="o2zntt_17"><p><span class="control" id="o2zntt_23">Public Access:</span> <code class="code" id="o2zntt_24">locationCoordinates</code></p></li></ul></section><section class="chapter"><h3 id="location-address" data-toc="location-address">Location Address</h3><ul class="list _bullet" id="o2zntt_25"><li class="list__item" id="o2zntt_26"><p><span class="control" id="o2zntt_30">Variable:</span> <code class="code" id="o2zntt_31">_locationAddress</code></p></li><li class="list__item" id="o2zntt_27"><p><span class="control" id="o2zntt_32">Type:</span> <code class="code" id="o2zntt_33">MutableStateFlow&lt;Resource&lt;String&gt;&gt;</code></p></li><li class="list__item" id="o2zntt_28"><p><span class="control" id="o2zntt_34">Description:</span> Holds the reverse-geocoded address for a given set of latitude and longitude.</p></li><li class="list__item" id="o2zntt_29"><p><span class="control" id="o2zntt_35">Public Access:</span> <code class="code" id="o2zntt_36">locationAddress</code></p></li></ul></section><section class="chapter"><h3 id="suggested-locations" data-toc="suggested-locations">Suggested Locations</h3><ul class="list _bullet" id="o2zntt_37"><li class="list__item" id="o2zntt_38"><p><span class="control" id="o2zntt_42">Variable:</span> <code class="code" id="o2zntt_43">_suggestedLocations</code></p></li><li class="list__item" id="o2zntt_39"><p><span class="control" id="o2zntt_44">Type:</span> <code class="code" id="o2zntt_45">MutableStateFlow&lt;Resource&lt;List&lt;Suggestion&gt;&gt;&gt;</code></p></li><li class="list__item" id="o2zntt_40"><p><span class="control" id="o2zntt_46">Description:</span> Holds a list of suggested locations based on user input.</p></li><li class="list__item" id="o2zntt_41"><p><span class="control" id="o2zntt_47">Public Access:</span> <code class="code" id="o2zntt_48">suggestedLocations</code></p></li></ul></section></section><section class="chapter"><h2 id="methods" data-toc="methods">Methods</h2><section class="chapter"><h3 id="fetchsuggestions" data-toc="fetchsuggestions">fetchSuggestions</h3><div class="code-block" data-lang="kotlin">
fun fetchSuggestions(
    query: String,
    sessionToken: String,
    proximity: String? = null
)
</div><p id="o2zntt_55">Fetches location suggestions based on the user's query.</p><ul class="list _bullet" id="o2zntt_56"><li class="list__item" id="o2zntt_57"><p><span class="control" id="o2zntt_59">Parameters:</span></p><ul class="list _bullet" id="o2zntt_60"><li class="list__item" id="o2zntt_61"><p><code class="code" id="o2zntt_64">query</code> <span class="emphasis" id="o2zntt_65">(String)</span>: The search query string.</p></li><li class="list__item" id="o2zntt_62"><p><code class="code" id="o2zntt_66">sessionToken</code> <span class="emphasis" id="o2zntt_67">(String)</span>: A token to track the search session.</p></li><li class="list__item" id="o2zntt_63"><p><code class="code" id="o2zntt_68">proximity</code> <span class="emphasis" id="o2zntt_69">(String?)</span>: Optional proximity coordinates to prioritize nearby results.</p></li></ul></li><li class="list__item" id="o2zntt_58"><p><span class="control" id="o2zntt_70">State Updates:</span></p><ul class="list _bullet" id="o2zntt_71"><li class="list__item" id="o2zntt_72"><p>Updates <code class="code" id="o2zntt_73">_suggestedLocations</code> with the result or error.</p></li></ul></li></ul></section><section class="chapter"><h3 id="forwardgeocoding" data-toc="forwardgeocoding">forwardGeocoding</h3><div class="code-block" data-lang="kotlin">
fun forwardGeocoding(query: String, proximity: String? = null)
</div><p id="o2zntt_75">Performs forward geocoding to fetch coordinates for a given address.</p><ul class="list _bullet" id="o2zntt_76"><li class="list__item" id="o2zntt_77"><p><span class="control" id="o2zntt_79">Parameters:</span></p><ul class="list _bullet" id="o2zntt_80"><li class="list__item" id="o2zntt_81"><p><code class="code" id="o2zntt_83">query</code> <span class="emphasis" id="o2zntt_84">(String)</span>: The address to geocode.</p></li><li class="list__item" id="o2zntt_82"><p><code class="code" id="o2zntt_85">proximity</code> <span class="emphasis" id="o2zntt_86">(String?)</span>: Optional proximity coordinates.</p></li></ul></li><li class="list__item" id="o2zntt_78"><p><span class="control" id="o2zntt_87">State Updates:</span></p><ul class="list _bullet" id="o2zntt_88"><li class="list__item" id="o2zntt_89"><p>Updates <code class="code" id="o2zntt_90">_locationCoordinates</code> with the geocoded coordinates or error.</p></li></ul></li></ul></section><section class="chapter"><h3 id="reversegeocoding" data-toc="reversegeocoding">reverseGeocoding</h3><div class="code-block" data-lang="kotlin">
fun reverseGeocoding(latitude: Double, longitude: Double)
</div><p id="o2zntt_92">Performs reverse geocoding to fetch an address for a given set of coordinates.</p><ul class="list _bullet" id="o2zntt_93"><li class="list__item" id="o2zntt_94"><p><span class="control" id="o2zntt_96">Parameters:</span></p><ul class="list _bullet" id="o2zntt_97"><li class="list__item" id="o2zntt_98"><p><code class="code" id="o2zntt_100">latitude</code> <span class="emphasis" id="o2zntt_101">(Double)</span>: Latitude of the location.</p></li><li class="list__item" id="o2zntt_99"><p><code class="code" id="o2zntt_102">longitude</code> <span class="emphasis" id="o2zntt_103">(Double)</span>: Longitude of the location.</p></li></ul></li><li class="list__item" id="o2zntt_95"><p><span class="control" id="o2zntt_104">State Updates:</span></p><ul class="list _bullet" id="o2zntt_105"><li class="list__item" id="o2zntt_106"><p>Updates <code class="code" id="o2zntt_107">_locationAddress</code> with the reverse-geocoded address or error.</p></li></ul></li></ul></section><section class="chapter"><h3 id="forwardgeocodingasync" data-toc="forwardgeocodingasync">forwardGeocodingAsync</h3><div class="code-block" data-lang="kotlin">
suspend fun forwardGeocodingAsync(query: String): Pair&lt;Double, Double&gt;?
</div><p id="o2zntt_109">Asynchronously performs forward geocoding to fetch coordinates for a given address.</p><ul class="list _bullet" id="o2zntt_110"><li class="list__item" id="o2zntt_111"><p><span class="control" id="o2zntt_113">Parameters:</span></p><ul class="list _bullet" id="o2zntt_114"><li class="list__item" id="o2zntt_115"><p><code class="code" id="o2zntt_116">query</code> <span class="emphasis" id="o2zntt_117">(String)</span>: The address to geocode.</p></li></ul></li><li class="list__item" id="o2zntt_112"><p><span class="control" id="o2zntt_118">Returns:</span></p><ul class="list _bullet" id="o2zntt_119"><li class="list__item" id="o2zntt_120"><p>A <code class="code" id="o2zntt_121">Pair</code> of <code class="code" id="o2zntt_122">latitude</code> and <code class="code" id="o2zntt_123">longitude</code> if successful, or <code class="code" id="o2zntt_124">null</code> if an error occurs.</p></li></ul></li></ul></section><section class="chapter"><h3 id="clearlocationvariables" data-toc="clearlocationvariables">clearLocationVariables</h3><div class="code-block" data-lang="kotlin">
fun clearLocationVariables()
</div><p id="o2zntt_126">Clears the state variables for location coordinates and address.</p><ul class="list _bullet" id="o2zntt_127"><li class="list__item" id="o2zntt_128"><p><span class="control" id="o2zntt_129">State Updates:</span></p><ul class="list _bullet" id="o2zntt_130"><li class="list__item" id="o2zntt_131"><p>Resets <code class="code" id="o2zntt_132">_locationCoordinates</code> and <code class="code" id="o2zntt_133">_locationAddress</code> to <code class="code" id="o2zntt_134">Resource.Loading()</code>.</p></li></ul></li></ul></section></section><section class="chapter"><h2 id="dependencies" data-toc="dependencies">Dependencies</h2><ul class="list _bullet" id="o2zntt_135"><li class="list__item" id="o2zntt_136"><p><span class="control" id="o2zntt_137"><code class="code" id="o2zntt_141">MapboxRepository</code></span>: Provides the methods <code class="code" id="o2zntt_138">getMapboxSuggestions</code>, <code class="code" id="o2zntt_139">geocodeAddress</code>, and <code class="code" id="o2zntt_140">reverseGeocode</code> to interact with the Mapbox API.</p></li></ul></section><div class="last-modified">Last modified: 16 January 2025</div><div data-feedback-placeholder="true"></div><div class="navigation-links _bottom"><a href="viewmodels.html" class="navigation-links__prev">Viewmodels [Package]</a><a href="auth-viewmodel.html" class="navigation-links__next">Authentication [Viewmodel]</a></div></article><div id="disqus_thread"></div></div></section></main></div><script src="https://resources.jetbrains.com/writerside/apidoc/6.10.0-b575/app.js"></script></body></html>