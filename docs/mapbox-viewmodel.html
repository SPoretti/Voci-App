<!DOCTYPE html SYSTEM "about:legacy-compat">
<html lang="en-US" data-preset="contrast" data-primary-color="#3F56CE"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="UTF-8"><meta name="built-on" content="2025-01-16T14:25:55.9740026"><title>Mapbox [Viewmodel] | Voci App Documentation</title><script type="application/json" id="virtual-toc-data">[{"id":"overview","level":0,"title":"Overview","anchor":"#overview"},{"id":"state-variables","level":0,"title":"State Variables","anchor":"#state-variables"},{"id":"methods","level":0,"title":"Methods","anchor":"#methods"},{"id":"dependencies","level":0,"title":"Dependencies","anchor":"#dependencies"}]</script><script type="application/json" id="topic-shortcuts"></script><link href="https://resources.jetbrains.com/writerside/apidoc/6.10.0-b575/app.css" rel="stylesheet"><link rel="icon" type="image/png" sizes="16x16" href="images/voci-logo.png"><meta name="image" content=""><!-- Open Graph --><meta property="og:title" content="Mapbox [Viewmodel] | Voci App Documentation"><meta property="og:description" content=""><meta property="og:image" content=""><meta property="og:site_name" content="Voci App Documentation Help"><meta property="og:type" content="website"><meta property="og:locale" content="en_US"><meta property="og:url" content="writerside-documentation/mapbox-viewmodel.html"><!-- End Open Graph --><!-- Twitter Card --><meta name="twitter:card" content="summary_large_image"><meta name="twitter:site" content=""><meta name="twitter:title" content="Mapbox [Viewmodel] | Voci App Documentation"><meta name="twitter:description" content=""><meta name="twitter:creator" content=""><meta name="twitter:image:src" content=""><!-- End Twitter Card --><!-- Schema.org WebPage --><script type="application/ld+json">{
    "@context": "http://schema.org",
    "@type": "WebPage",
    "@id": "writerside-documentation/mapbox-viewmodel.html#webpage",
    "url": "writerside-documentation/mapbox-viewmodel.html",
    "name": "Mapbox [Viewmodel] | Voci App Documentation",
    "description": "",
    "image": "",
    "inLanguage":"en-US"
}</script><!-- End Schema.org --><!-- Schema.org WebSite --><script type="application/ld+json">{
    "@type": "WebSite",
    "@id": "writerside-documentation/#website",
    "url": "writerside-documentation/",
    "name": "Voci App Documentation Help"
}</script><!-- End Schema.org --></head><body data-id="Mapbox-Viewmodel" data-main-title="Mapbox [Viewmodel]" data-article-props="{&quot;seeAlsoStyle&quot;:&quot;links&quot;}" data-template="article" data-breadcrumbs="App.md|App///Ui-Package.md|User Interface (UI) [Package]///Viewmodels.md|Viewmodels [Package]"><div class="wrapper"><main class="panel _main"><header class="panel__header"><div class="container"><h3>Voci App Documentation  Help</h3><div class="panel-trigger"></div></div></header><section class="panel__content"><div class="container"><article class="article" data-shortcut-switcher="inactive"><h1 data-toc="Mapbox-Viewmodel" id="Mapbox-Viewmodel.md">Mapbox [Viewmodel]</h1><section class="chapter"><h2 id="overview" data-toc="overview">Overview</h2><p id="z52op8_7"><code class="code" id="z52op8_8">MapboxViewModel</code> is responsible for handling all interactions with the Mapbox API for geocoding, reverse geocoding, and location suggestions. This ViewModel uses the <code class="code" id="z52op8_9">MapboxRepository</code> for backend communication and manages state variables to hold results and provide updates to the UI.</p></section><section class="chapter"><h2 id="state-variables" data-toc="state-variables">State Variables</h2><section class="chapter"><h3 id="location-coordinates" data-toc="location-coordinates">Location Coordinates</h3><ul class="list _bullet" id="z52op8_13"><li class="list__item" id="z52op8_14"><p><span class="control" id="z52op8_18">Variable:</span> <code class="code" id="z52op8_19">_locationCoordinates</code></p></li><li class="list__item" id="z52op8_15"><p><span class="control" id="z52op8_20">Type:</span> <code class="code" id="z52op8_21">MutableStateFlow&lt;Resource&lt;Pair&lt;Double, Double&gt;&gt;&gt;</code></p></li><li class="list__item" id="z52op8_16"><p><span class="control" id="z52op8_22">Description:</span> Holds the geocoded latitude and longitude pair for a given address.</p></li><li class="list__item" id="z52op8_17"><p><span class="control" id="z52op8_23">Public Access:</span> <code class="code" id="z52op8_24">locationCoordinates</code></p></li></ul></section><section class="chapter"><h3 id="location-address" data-toc="location-address">Location Address</h3><ul class="list _bullet" id="z52op8_25"><li class="list__item" id="z52op8_26"><p><span class="control" id="z52op8_30">Variable:</span> <code class="code" id="z52op8_31">_locationAddress</code></p></li><li class="list__item" id="z52op8_27"><p><span class="control" id="z52op8_32">Type:</span> <code class="code" id="z52op8_33">MutableStateFlow&lt;Resource&lt;String&gt;&gt;</code></p></li><li class="list__item" id="z52op8_28"><p><span class="control" id="z52op8_34">Description:</span> Holds the reverse-geocoded address for a given set of latitude and longitude.</p></li><li class="list__item" id="z52op8_29"><p><span class="control" id="z52op8_35">Public Access:</span> <code class="code" id="z52op8_36">locationAddress</code></p></li></ul></section><section class="chapter"><h3 id="suggested-locations" data-toc="suggested-locations">Suggested Locations</h3><ul class="list _bullet" id="z52op8_37"><li class="list__item" id="z52op8_38"><p><span class="control" id="z52op8_42">Variable:</span> <code class="code" id="z52op8_43">_suggestedLocations</code></p></li><li class="list__item" id="z52op8_39"><p><span class="control" id="z52op8_44">Type:</span> <code class="code" id="z52op8_45">MutableStateFlow&lt;Resource&lt;List&lt;Suggestion&gt;&gt;&gt;</code></p></li><li class="list__item" id="z52op8_40"><p><span class="control" id="z52op8_46">Description:</span> Holds a list of suggested locations based on user input.</p></li><li class="list__item" id="z52op8_41"><p><span class="control" id="z52op8_47">Public Access:</span> <code class="code" id="z52op8_48">suggestedLocations</code></p></li></ul></section></section><section class="chapter"><h2 id="methods" data-toc="methods">Methods</h2><section class="chapter"><h3 id="fetchsuggestions" data-toc="fetchsuggestions">fetchSuggestions</h3><div class="code-block" data-lang="kotlin">
fun fetchSuggestions(
    query: String,
    sessionToken: String,
    proximity: String? = null
)
</div><p id="z52op8_55">Fetches location suggestions based on the user's query.</p><ul class="list _bullet" id="z52op8_56"><li class="list__item" id="z52op8_57"><p><span class="control" id="z52op8_59">Parameters:</span></p><ul class="list _bullet" id="z52op8_60"><li class="list__item" id="z52op8_61"><p><code class="code" id="z52op8_64">query</code> <span class="emphasis" id="z52op8_65">(String)</span>: The search query string.</p></li><li class="list__item" id="z52op8_62"><p><code class="code" id="z52op8_66">sessionToken</code> <span class="emphasis" id="z52op8_67">(String)</span>: A token to track the search session.</p></li><li class="list__item" id="z52op8_63"><p><code class="code" id="z52op8_68">proximity</code> <span class="emphasis" id="z52op8_69">(String?)</span>: Optional proximity coordinates to prioritize nearby results.</p></li></ul></li><li class="list__item" id="z52op8_58"><p><span class="control" id="z52op8_70">State Updates:</span></p><ul class="list _bullet" id="z52op8_71"><li class="list__item" id="z52op8_72"><p>Updates <code class="code" id="z52op8_73">_suggestedLocations</code> with the result or error.</p></li></ul></li></ul></section><section class="chapter"><h3 id="forwardgeocoding" data-toc="forwardgeocoding">forwardGeocoding</h3><div class="code-block" data-lang="kotlin">
fun forwardGeocoding(query: String, proximity: String? = null)
</div><p id="z52op8_75">Performs forward geocoding to fetch coordinates for a given address.</p><ul class="list _bullet" id="z52op8_76"><li class="list__item" id="z52op8_77"><p><span class="control" id="z52op8_79">Parameters:</span></p><ul class="list _bullet" id="z52op8_80"><li class="list__item" id="z52op8_81"><p><code class="code" id="z52op8_83">query</code> <span class="emphasis" id="z52op8_84">(String)</span>: The address to geocode.</p></li><li class="list__item" id="z52op8_82"><p><code class="code" id="z52op8_85">proximity</code> <span class="emphasis" id="z52op8_86">(String?)</span>: Optional proximity coordinates.</p></li></ul></li><li class="list__item" id="z52op8_78"><p><span class="control" id="z52op8_87">State Updates:</span></p><ul class="list _bullet" id="z52op8_88"><li class="list__item" id="z52op8_89"><p>Updates <code class="code" id="z52op8_90">_locationCoordinates</code> with the geocoded coordinates or error.</p></li></ul></li></ul></section><section class="chapter"><h3 id="reversegeocoding" data-toc="reversegeocoding">reverseGeocoding</h3><div class="code-block" data-lang="kotlin">
fun reverseGeocoding(latitude: Double, longitude: Double)
</div><p id="z52op8_92">Performs reverse geocoding to fetch an address for a given set of coordinates.</p><ul class="list _bullet" id="z52op8_93"><li class="list__item" id="z52op8_94"><p><span class="control" id="z52op8_96">Parameters:</span></p><ul class="list _bullet" id="z52op8_97"><li class="list__item" id="z52op8_98"><p><code class="code" id="z52op8_100">latitude</code> <span class="emphasis" id="z52op8_101">(Double)</span>: Latitude of the location.</p></li><li class="list__item" id="z52op8_99"><p><code class="code" id="z52op8_102">longitude</code> <span class="emphasis" id="z52op8_103">(Double)</span>: Longitude of the location.</p></li></ul></li><li class="list__item" id="z52op8_95"><p><span class="control" id="z52op8_104">State Updates:</span></p><ul class="list _bullet" id="z52op8_105"><li class="list__item" id="z52op8_106"><p>Updates <code class="code" id="z52op8_107">_locationAddress</code> with the reverse-geocoded address or error.</p></li></ul></li></ul></section><section class="chapter"><h3 id="forwardgeocodingasync" data-toc="forwardgeocodingasync">forwardGeocodingAsync</h3><div class="code-block" data-lang="kotlin">
suspend fun forwardGeocodingAsync(query: String): Pair&lt;Double, Double&gt;?
</div><p id="z52op8_109">Asynchronously performs forward geocoding to fetch coordinates for a given address.</p><ul class="list _bullet" id="z52op8_110"><li class="list__item" id="z52op8_111"><p><span class="control" id="z52op8_113">Parameters:</span></p><ul class="list _bullet" id="z52op8_114"><li class="list__item" id="z52op8_115"><p><code class="code" id="z52op8_116">query</code> <span class="emphasis" id="z52op8_117">(String)</span>: The address to geocode.</p></li></ul></li><li class="list__item" id="z52op8_112"><p><span class="control" id="z52op8_118">Returns:</span></p><ul class="list _bullet" id="z52op8_119"><li class="list__item" id="z52op8_120"><p>A <code class="code" id="z52op8_121">Pair</code> of <code class="code" id="z52op8_122">latitude</code> and <code class="code" id="z52op8_123">longitude</code> if successful, or <code class="code" id="z52op8_124">null</code> if an error occurs.</p></li></ul></li></ul></section><section class="chapter"><h3 id="clearlocationvariables" data-toc="clearlocationvariables">clearLocationVariables</h3><div class="code-block" data-lang="kotlin">
fun clearLocationVariables()
</div><p id="z52op8_126">Clears the state variables for location coordinates and address.</p><ul class="list _bullet" id="z52op8_127"><li class="list__item" id="z52op8_128"><p><span class="control" id="z52op8_129">State Updates:</span></p><ul class="list _bullet" id="z52op8_130"><li class="list__item" id="z52op8_131"><p>Resets <code class="code" id="z52op8_132">_locationCoordinates</code> and <code class="code" id="z52op8_133">_locationAddress</code> to <code class="code" id="z52op8_134">Resource.Loading()</code>.</p></li></ul></li></ul></section></section><section class="chapter"><h2 id="dependencies" data-toc="dependencies">Dependencies</h2><ul class="list _bullet" id="z52op8_135"><li class="list__item" id="z52op8_136"><p><span class="control" id="z52op8_137"><code class="code" id="z52op8_141">MapboxRepository</code></span>: Provides the methods <code class="code" id="z52op8_138">getMapboxSuggestions</code>, <code class="code" id="z52op8_139">geocodeAddress</code>, and <code class="code" id="z52op8_140">reverseGeocode</code> to interact with the Mapbox API.</p></li></ul></section><div class="last-modified">Last modified: 16 January 2025</div><div data-feedback-placeholder="true"></div><div class="navigation-links _bottom"><a href="viewmodels.html" class="navigation-links__prev">Viewmodels [Package]</a><a href="auth-viewmodel.html" class="navigation-links__next">Authentication [Viewmodel]</a></div></article><div id="disqus_thread"></div></div></section></main></div><script src="https://resources.jetbrains.com/writerside/apidoc/6.10.0-b575/app.js"></script></body></html>