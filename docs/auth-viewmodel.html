<!DOCTYPE html SYSTEM "about:legacy-compat">
<html lang="en-US" data-preset="contrast" data-primary-color="#3F56CE"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="UTF-8"><meta name="built-on" content="2025-01-16T16:29:41.3319569"><title>Authentication [Viewmodel] | Voci App Documentation</title><script type="application/json" id="virtual-toc-data">[{"id":"state-variables","level":0,"title":"State Variables","anchor":"#state-variables"},{"id":"methods","level":0,"title":"Methods","anchor":"#methods"},{"id":"dependencies","level":0,"title":"Dependencies","anchor":"#dependencies"},{"id":"sealed-classes","level":0,"title":"Sealed Classes","anchor":"#sealed-classes"}]</script><script type="application/json" id="topic-shortcuts"></script><link href="https://resources.jetbrains.com/writerside/apidoc/6.10.0-b575/app.css" rel="stylesheet"><link rel="icon" type="image/png" sizes="16x16" href="images/voci-logo.png"><meta name="image" content=""><!-- Open Graph --><meta property="og:title" content="Authentication [Viewmodel] | Voci App Documentation"><meta property="og:description" content=""><meta property="og:image" content=""><meta property="og:site_name" content="Voci App Documentation Help"><meta property="og:type" content="website"><meta property="og:locale" content="en_US"><meta property="og:url" content="writerside-documentation/auth-viewmodel.html"><!-- End Open Graph --><!-- Twitter Card --><meta name="twitter:card" content="summary_large_image"><meta name="twitter:site" content=""><meta name="twitter:title" content="Authentication [Viewmodel] | Voci App Documentation"><meta name="twitter:description" content=""><meta name="twitter:creator" content=""><meta name="twitter:image:src" content=""><!-- End Twitter Card --><!-- Schema.org WebPage --><script type="application/ld+json">{
    "@context": "http://schema.org",
    "@type": "WebPage",
    "@id": "writerside-documentation/auth-viewmodel.html#webpage",
    "url": "writerside-documentation/auth-viewmodel.html",
    "name": "Authentication [Viewmodel] | Voci App Documentation",
    "description": "",
    "image": "",
    "inLanguage":"en-US"
}</script><!-- End Schema.org --><!-- Schema.org WebSite --><script type="application/ld+json">{
    "@type": "WebSite",
    "@id": "writerside-documentation/#website",
    "url": "writerside-documentation/",
    "name": "Voci App Documentation Help"
}</script><!-- End Schema.org --></head><body data-id="Auth-Viewmodel" data-main-title="Authentication [Viewmodel]" data-article-props="{&quot;seeAlsoStyle&quot;:&quot;links&quot;}" data-template="article" data-breadcrumbs="App.md|App///Ui-Package.md|User Interface (UI) [Package]///Viewmodels.md|Viewmodels [Package]"><div class="wrapper"><main class="panel _main"><header class="panel__header"><div class="container"><h3>Voci App Documentation  Help</h3><div class="panel-trigger"></div></div></header><section class="panel__content"><div class="container"><article class="article" data-shortcut-switcher="inactive"><h1 data-toc="Auth-Viewmodel" id="Auth-Viewmodel.md">Authentication [Viewmodel]</h1><p id="-d7m5h4_3">The <code class="code" id="-d7m5h4_8">AuthViewModel</code> class handles user authentication logic in the application. It manages the authentication state, facilitates signing in and signing up, and provides utility functions for user authentication, profile management, and email verification.</p><section class="chapter"><h2 id="state-variables" data-toc="state-variables">State Variables</h2><section class="chapter"><h3 id="auth-state" data-toc="auth-state">Auth State</h3><ul class="list _bullet" id="-d7m5h4_10"><li class="list__item" id="-d7m5h4_12"><p><span class="control" id="-d7m5h4_16">Variable:</span> <code class="code" id="-d7m5h4_17">_authState</code></p></li><li class="list__item" id="-d7m5h4_13"><p><span class="control" id="-d7m5h4_18">Public Access:</span> <code class="code" id="-d7m5h4_19">authState</code></p></li><li class="list__item" id="-d7m5h4_14"><p><span class="control" id="-d7m5h4_20">Type:</span> <code class="code" id="-d7m5h4_21">StateFlow&lt;AuthState&gt;</code></p></li><li class="list__item" id="-d7m5h4_15"><p><span class="control" id="-d7m5h4_22">Description:</span> Holds the current authentication state. It can either be <code class="code" id="-d7m5h4_23">Authenticated</code>, <code class="code" id="-d7m5h4_24">Unauthenticated</code>, or <code class="code" id="-d7m5h4_25">Uninitialized</code>.</p></li></ul></section></section><section class="chapter"><h2 id="methods" data-toc="methods">Methods</h2><section class="chapter"><h3 id="oncleared" data-toc="oncleared">onCleared</h3><ul class="list _bullet" id="-d7m5h4_40"><li class="list__item" id="-d7m5h4_41"><p><span class="control" id="-d7m5h4_42">Description:</span> Cleans up the <code class="code" id="-d7m5h4_43">AuthStateListener</code> when the ViewModel is cleared.</p></li></ul></section><section class="chapter"><h3 id="signout" data-toc="signout">signOut</h3><ul class="list _bullet" id="-d7m5h4_44"><li class="list__item" id="-d7m5h4_45"><p><span class="control" id="-d7m5h4_47">Description:</span> Signs the current user out of the application.</p></li><li class="list__item" id="-d7m5h4_46"><p><span class="control" id="-d7m5h4_48">Usage:</span> Called when the user requests to sign out.</p></li></ul></section><section class="chapter"><h3 id="signinwithemailandpassword" data-toc="signinwithemailandpassword">signInWithEmailAndPassword</h3><ul class="list _bullet" id="-d7m5h4_49"><li class="list__item" id="-d7m5h4_50"><p><span class="control" id="-d7m5h4_53">Description:</span> Signs in a user with their email and password.</p></li><li class="list__item" id="-d7m5h4_51"><p><span class="control" id="-d7m5h4_54">Parameters:</span></p><ul class="list _bullet" id="-d7m5h4_55"><li class="list__item" id="-d7m5h4_56"><p><code class="code" id="-d7m5h4_58">email</code>: <code class="code" id="-d7m5h4_59">String</code> - The email of the user.</p></li><li class="list__item" id="-d7m5h4_57"><p><code class="code" id="-d7m5h4_60">password</code>: <code class="code" id="-d7m5h4_61">String</code> - The password of the user.</p></li></ul></li><li class="list__item" id="-d7m5h4_52"><p><span class="control" id="-d7m5h4_62">Returns:</span> <code class="code" id="-d7m5h4_63">AuthResult</code> - Success or Failure based on the outcome.</p></li></ul></section><section class="chapter"><h3 id="createuserwithemailandpassword" data-toc="createuserwithemailandpassword">createUserWithEmailAndPassword</h3><ul class="list _bullet" id="-d7m5h4_64"><li class="list__item" id="-d7m5h4_65"><p><span class="control" id="-d7m5h4_68">Description:</span> Creates a new user with their email and password.</p></li><li class="list__item" id="-d7m5h4_66"><p><span class="control" id="-d7m5h4_69">Parameters:</span></p><ul class="list _bullet" id="-d7m5h4_70"><li class="list__item" id="-d7m5h4_71"><p><code class="code" id="-d7m5h4_73">email</code>: <code class="code" id="-d7m5h4_74">String</code> - The email of the user.</p></li><li class="list__item" id="-d7m5h4_72"><p><code class="code" id="-d7m5h4_75">password</code>: <code class="code" id="-d7m5h4_76">String</code> - The password of the user.</p></li></ul></li><li class="list__item" id="-d7m5h4_67"><p><span class="control" id="-d7m5h4_77">Returns:</span> <code class="code" id="-d7m5h4_78">AuthResult</code> - Success or Failure based on the outcome.</p></li></ul></section><section class="chapter"><h3 id="arefieldsempty" data-toc="arefieldsempty">areFieldsEmpty</h3><ul class="list _bullet" id="-d7m5h4_79"><li class="list__item" id="-d7m5h4_80"><p><span class="control" id="-d7m5h4_83">Description:</span> Verifies if any of the provided fields are empty.</p></li><li class="list__item" id="-d7m5h4_81"><p><span class="control" id="-d7m5h4_84">Parameters:</span></p><ul class="list _bullet" id="-d7m5h4_85"><li class="list__item" id="-d7m5h4_86"><p><code class="code" id="-d7m5h4_87">fields</code>: <code class="code" id="-d7m5h4_88">vararg String</code> - The fields to check.</p></li></ul></li><li class="list__item" id="-d7m5h4_82"><p><span class="control" id="-d7m5h4_89">Returns:</span> <code class="code" id="-d7m5h4_90">Boolean</code> - True if any field is empty.</p></li></ul></section><section class="chapter"><h3 id="isphonenumbervalid" data-toc="isphonenumbervalid">isPhoneNumberValid</h3><ul class="list _bullet" id="-d7m5h4_91"><li class="list__item" id="-d7m5h4_92"><p><span class="control" id="-d7m5h4_95">Description:</span> Verifies if the provided phone number is valid.</p></li><li class="list__item" id="-d7m5h4_93"><p><span class="control" id="-d7m5h4_96">Parameters:</span></p><ul class="list _bullet" id="-d7m5h4_97"><li class="list__item" id="-d7m5h4_98"><p><code class="code" id="-d7m5h4_99">phoneNumber</code>: <code class="code" id="-d7m5h4_100">String</code> - The phone number to check.</p></li></ul></li><li class="list__item" id="-d7m5h4_94"><p><span class="control" id="-d7m5h4_101">Returns:</span> <code class="code" id="-d7m5h4_102">Boolean</code> - True if the phone number matches the valid pattern.</p></li></ul></section><section class="chapter"><h3 id="ispasswordvalid" data-toc="ispasswordvalid">isPasswordValid</h3><ul class="list _bullet" id="-d7m5h4_103"><li class="list__item" id="-d7m5h4_104"><p><span class="control" id="-d7m5h4_107">Description:</span> Verifies if the provided password is valid.</p></li><li class="list__item" id="-d7m5h4_105"><p><span class="control" id="-d7m5h4_108">Parameters:</span></p><ul class="list _bullet" id="-d7m5h4_109"><li class="list__item" id="-d7m5h4_110"><p><code class="code" id="-d7m5h4_111">password</code>: <code class="code" id="-d7m5h4_112">String</code> - The password to check.</p></li></ul></li><li class="list__item" id="-d7m5h4_106"><p><span class="control" id="-d7m5h4_113">Returns:</span> <code class="code" id="-d7m5h4_114">Boolean</code> - True if the password matches the valid pattern.</p></li></ul></section><section class="chapter"><h3 id="isemailvalid" data-toc="isemailvalid">isEmailValid</h3><ul class="list _bullet" id="-d7m5h4_115"><li class="list__item" id="-d7m5h4_116"><p><span class="control" id="-d7m5h4_119">Description:</span> Verifies if the provided email is valid.</p></li><li class="list__item" id="-d7m5h4_117"><p><span class="control" id="-d7m5h4_120">Parameters:</span></p><ul class="list _bullet" id="-d7m5h4_121"><li class="list__item" id="-d7m5h4_122"><p><code class="code" id="-d7m5h4_123">email</code>: <code class="code" id="-d7m5h4_124">String</code> - The email to check.</p></li></ul></li><li class="list__item" id="-d7m5h4_118"><p><span class="control" id="-d7m5h4_125">Returns:</span> <code class="code" id="-d7m5h4_126">Boolean</code> - True if the email matches the valid pattern.</p></li></ul></section><section class="chapter"><h3 id="updateuserprofile" data-toc="updateuserprofile">updateUserProfile</h3><ul class="list _bullet" id="-d7m5h4_127"><li class="list__item" id="-d7m5h4_128"><p><span class="control" id="-d7m5h4_131">Description:</span> Updates the current user's profile with a new display name and photo URL.</p></li><li class="list__item" id="-d7m5h4_129"><p><span class="control" id="-d7m5h4_132">Parameters:</span></p><ul class="list _bullet" id="-d7m5h4_133"><li class="list__item" id="-d7m5h4_134"><p><code class="code" id="-d7m5h4_136">displayName</code>: <code class="code" id="-d7m5h4_137">String?</code> - The new display name.</p></li><li class="list__item" id="-d7m5h4_135"><p><code class="code" id="-d7m5h4_138">photoUrl</code>: <code class="code" id="-d7m5h4_139">String?</code> - The new photo URL.</p></li></ul></li><li class="list__item" id="-d7m5h4_130"><p><span class="control" id="-d7m5h4_140">Returns:</span> <code class="code" id="-d7m5h4_141">AuthResult</code> - Success or Failure based on the outcome.</p></li></ul></section><section class="chapter"><h3 id="getcurrentuserprofile" data-toc="getcurrentuserprofile">getCurrentUserProfile</h3><ul class="list _bullet" id="-d7m5h4_142"><li class="list__item" id="-d7m5h4_143"><p><span class="control" id="-d7m5h4_145">Description:</span> Retrieves the current user's profile details (display name and photo URL).</p></li><li class="list__item" id="-d7m5h4_144"><p><span class="control" id="-d7m5h4_146">Returns:</span> <code class="code" id="-d7m5h4_147">UserProfile?</code> - The current user's profile or null if no user is authenticated.</p></li></ul></section><section class="chapter"><h3 id="getcurrentuser" data-toc="getcurrentuser">getCurrentUser</h3><ul class="list _bullet" id="-d7m5h4_148"><li class="list__item" id="-d7m5h4_149"><p><span class="control" id="-d7m5h4_151">Description:</span> Retrieves the current authenticated user.</p></li><li class="list__item" id="-d7m5h4_150"><p><span class="control" id="-d7m5h4_152">Returns:</span> <code class="code" id="-d7m5h4_153">FirebaseUser?</code> - The current authenticated user or null if no user is authenticated.</p></li></ul></section><section class="chapter"><h3 id="sendverificationemail" data-toc="sendverificationemail">sendVerificationEmail</h3><ul class="list _bullet" id="-d7m5h4_154"><li class="list__item" id="-d7m5h4_155"><p><span class="control" id="-d7m5h4_157">Description:</span> Sends a verification email to the current user.</p></li><li class="list__item" id="-d7m5h4_156"><p><span class="control" id="-d7m5h4_158">Usage:</span> Called to send an email to verify the user's email address.</p></li></ul></section><section class="chapter"><h3 id="reauthenticateandverifyemail" data-toc="reauthenticateandverifyemail">reauthenticateAndVerifyEmail</h3><ul class="list _bullet" id="-d7m5h4_159"><li class="list__item" id="-d7m5h4_160"><p><span class="control" id="-d7m5h4_163">Description:</span> Re-authenticates the user and verifies their email address before updating it.</p></li><li class="list__item" id="-d7m5h4_161"><p><span class="control" id="-d7m5h4_164">Parameters:</span></p><ul class="list _bullet" id="-d7m5h4_165"><li class="list__item" id="-d7m5h4_166"><p><code class="code" id="-d7m5h4_168">newEmail</code>: <code class="code" id="-d7m5h4_169">String</code> - The new email address.</p></li><li class="list__item" id="-d7m5h4_167"><p><code class="code" id="-d7m5h4_170">password</code>: <code class="code" id="-d7m5h4_171">String</code> - The current password for reauthentication.</p></li></ul></li><li class="list__item" id="-d7m5h4_162"><p><span class="control" id="-d7m5h4_172">Usage:</span> Called when updating the user's email address.</p></li></ul></section><section class="chapter"><h3 id="sendpasswordresetemail" data-toc="sendpasswordresetemail">sendPasswordResetEmail</h3><ul class="list _bullet" id="-d7m5h4_173"><li class="list__item" id="-d7m5h4_175"><p><span class="control" id="-d7m5h4_178">Description:</span> Sends a password reset email to the user.</p></li><li class="list__item" id="-d7m5h4_176"><p><span class="control" id="-d7m5h4_179">Parameters:</span></p><ul class="list _bullet" id="-d7m5h4_180"><li class="list__item" id="-d7m5h4_181"><p><code class="code" id="-d7m5h4_182">email</code>: <code class="code" id="-d7m5h4_183">String</code> - The email address to which the reset email will be sent.</p></li></ul></li><li class="list__item" id="-d7m5h4_177"><p><span class="control" id="-d7m5h4_184">Returns:</span> <code class="code" id="-d7m5h4_185">AuthResult</code> - Success or Failure based on the outcome.</p></li></ul></section></section><section class="chapter"><h2 id="dependencies" data-toc="dependencies">Dependencies</h2><ul class="list _bullet" id="-d7m5h4_186"><li class="list__item" id="-d7m5h4_188"><p><span class="control" id="-d7m5h4_190">FirebaseAuth:</span></p><ul class="list _bullet" id="-d7m5h4_191"><li class="list__item" id="-d7m5h4_192"><p>Provides authentication functionalities for the application.</p></li></ul></li><li class="list__item" id="-d7m5h4_189"><p><span class="control" id="-d7m5h4_193">ExceptionHandler:</span></p><ul class="list _bullet" id="-d7m5h4_194"><li class="list__item" id="-d7m5h4_195"><p>Handles authentication exceptions and errors.</p></li></ul></li></ul></section><section class="chapter"><h2 id="sealed-classes" data-toc="sealed-classes">Sealed Classes</h2><section class="chapter"><h3 id="authresult" data-toc="authresult">AuthResult</h3><ul class="list _bullet" id="-d7m5h4_198"><li class="list__item" id="-d7m5h4_199"><p><span class="control" id="-d7m5h4_201">Success</span>: Represents a successful authentication result.</p></li><li class="list__item" id="-d7m5h4_200"><p><span class="control" id="-d7m5h4_202">Failure</span>: Represents a failed authentication result with an associated error message.</p></li></ul></section><section class="chapter"><h3 id="userprofile" data-toc="userprofile">UserProfile</h3><ul class="list _bullet" id="-d7m5h4_203"><li class="list__item" id="-d7m5h4_205"><p><span class="control" id="-d7m5h4_207">displayName</span>: <code class="code" id="-d7m5h4_208">String?</code> - The user's display name.</p></li><li class="list__item" id="-d7m5h4_206"><p><span class="control" id="-d7m5h4_209">photoUrl</span>: <code class="code" id="-d7m5h4_210">String?</code> - The user's photo URL.</p></li></ul></section></section><div class="last-modified">Last modified: 16 January 2025</div><div data-feedback-placeholder="true"></div><div class="navigation-links _bottom"><a href="mapbox-viewmodel.html" class="navigation-links__prev">Mapbox [Viewmodel]</a><a href="homeless-viewmodel.html" class="navigation-links__next">Homeless [Viewmodel]</a></div></article><div id="disqus_thread"></div></div></section></main></div><script src="https://resources.jetbrains.com/writerside/apidoc/6.10.0-b575/app.js"></script></body></html>