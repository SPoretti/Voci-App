<!DOCTYPE html SYSTEM "about:legacy-compat">
<html lang="en-US" data-preset="contrast" data-primary-color="#3F56CE"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="UTF-8"><meta name="built-on" content="2025-01-16T14:25:55.9841209"><title>ServiceLocator [Service] | Voci App Documentation</title><script type="application/json" id="virtual-toc-data">[{"id":"overview","level":0,"title":"Overview","anchor":"#overview"},{"id":"purpose-of-service-locator","level":0,"title":"Purpose of Service Locator","anchor":"#purpose-of-service-locator"},{"id":"structure-of-the-file","level":0,"title":"Structure of the File","anchor":"#structure-of-the-file"},{"id":"integration-in-the-application","level":0,"title":"Integration in the Application","anchor":"#integration-in-the-application"},{"id":"benefits-of-the-service-locator-pattern","level":0,"title":"Benefits of the Service Locator Pattern","anchor":"#benefits-of-the-service-locator-pattern"},{"id":"usage-example","level":0,"title":"Usage Example","anchor":"#usage-example"},{"id":"conclusion","level":0,"title":"Conclusion","anchor":"#conclusion"}]</script><script type="application/json" id="topic-shortcuts"></script><link href="https://resources.jetbrains.com/writerside/apidoc/6.10.0-b575/app.css" rel="stylesheet"><link rel="icon" type="image/png" sizes="16x16" href="images/voci-logo.png"><meta name="image" content=""><!-- Open Graph --><meta property="og:title" content="ServiceLocator [Service] | Voci App Documentation"><meta property="og:description" content=""><meta property="og:image" content=""><meta property="og:site_name" content="Voci App Documentation Help"><meta property="og:type" content="website"><meta property="og:locale" content="en_US"><meta property="og:url" content="writerside-documentation/service-locator.html"><!-- End Open Graph --><!-- Twitter Card --><meta name="twitter:card" content="summary_large_image"><meta name="twitter:site" content=""><meta name="twitter:title" content="ServiceLocator [Service] | Voci App Documentation"><meta name="twitter:description" content=""><meta name="twitter:creator" content=""><meta name="twitter:image:src" content=""><!-- End Twitter Card --><!-- Schema.org WebPage --><script type="application/ld+json">{
    "@context": "http://schema.org",
    "@type": "WebPage",
    "@id": "writerside-documentation/service-locator.html#webpage",
    "url": "writerside-documentation/service-locator.html",
    "name": "ServiceLocator [Service] | Voci App Documentation",
    "description": "",
    "image": "",
    "inLanguage":"en-US"
}</script><!-- End Schema.org --><!-- Schema.org WebSite --><script type="application/ld+json">{
    "@type": "WebSite",
    "@id": "writerside-documentation/#website",
    "url": "writerside-documentation/",
    "name": "Voci App Documentation Help"
}</script><!-- End Schema.org --></head><body data-id="Service-Locator" data-main-title="ServiceLocator [Service]" data-article-props="{&quot;seeAlsoStyle&quot;:&quot;links&quot;}" data-template="article" data-breadcrumbs="App.md|App///DI-Package.md|Dependency Injection (DI) [Package]"><div class="wrapper"><main class="panel _main"><header class="panel__header"><div class="container"><h3>Voci App Documentation  Help</h3><div class="panel-trigger"></div></div></header><section class="panel__content"><div class="container"><article class="article" data-shortcut-switcher="inactive"><h1 data-toc="Service-Locator" id="Service-Locator.md">ServiceLocator [Service]</h1><section class="chapter"><h2 id="overview" data-toc="overview">Overview</h2><p id="z57zzoa_10">The <code class="code" id="z57zzoa_13">ServiceLocator.kt</code> file is a custom implementation of a Service Locator pattern designed to manage dependency injection for the VociApp project. Since the use of Hilt or other DI frameworks was restricted by the project guidelines, this class provides a centralized way to initialize and retrieve dependencies such as repositories, view models, and other services within the app.</p><p id="z57zzoa_11">The <code class="code" id="z57zzoa_14">ServiceLocator</code> ensures that all components requiring dependencies have access to pre-configured and properly initialized instances, avoiding repetitive initialization logic across the app.</p></section><section class="chapter"><h2 id="purpose-of-service-locator" data-toc="purpose-of-service-locator">Purpose of Service Locator</h2><section class="chapter"><h3 id="dependency-injection-without-hilt" data-toc="dependency-injection-without-hilt">Dependency Injection Without Hilt</h3><p id="z57zzoa_17">Dependency injection is a design pattern used to reduce coupling between classes and promote reusability and testability. Typically, frameworks like Hilt or Dagger handle this process automatically, but here, the Service Locator pattern was chosen to provide a similar functionality without relying on external libraries.</p></section><section class="chapter"><h3 id="how-it-works" data-toc="how-it-works">How It Works</h3><p id="z57zzoa_18">The Service Locator acts as a centralized registry where:</p><ul class="list _bullet" id="z57zzoa_19"><li class="list__item" id="z57zzoa_22"><p>Dependencies are created and managed.</p></li><li class="list__item" id="z57zzoa_23"><p>Components can fetch these dependencies on demand.</p></li></ul><p id="z57zzoa_20">By doing this, it separates the creation of objects from their usage, simplifying the structure of the app.</p></section></section><section class="chapter"><h2 id="structure-of-the-file" data-toc="structure-of-the-file">Structure of the File</h2><section class="chapter"><h3 id="servicelocator-class" data-toc="servicelocator-class"><code class="code" id="z57zzoa_29">ServiceLocator</code> Class</h3><p id="z57zzoa_27">The <code class="code" id="z57zzoa_30">ServiceLocator</code> is designed as a singleton, ensuring a single instance manages all dependencies:</p><ul class="list _bullet" id="z57zzoa_28"><li class="list__item" id="z57zzoa_31"><p id="z57zzoa_34"><span class="control" id="z57zzoa_36">Initialization:</span></p><ul class="list _bullet" id="z57zzoa_35"><li class="list__item" id="z57zzoa_37"><p><code class="code" id="z57zzoa_39">initialize(context: Context, firestore: FirebaseFirestore)</code> initializes the singleton instance and essential dependencies.</p></li><li class="list__item" id="z57zzoa_38"><p>Throws an exception if accessed before initialization.</p></li></ul></li><li class="list__item" id="z57zzoa_32"><p id="z57zzoa_40"><span class="control" id="z57zzoa_42">Repositories and View Models:</span></p><ul class="list _bullet" id="z57zzoa_41"><li class="list__item" id="z57zzoa_43"><p>Dependencies such as <code class="code" id="z57zzoa_44">HomelessRepository</code> or <code class="code" id="z57zzoa_45">VolunteerViewModel</code> are instantiated in the <code class="code" id="z57zzoa_46">ServiceLocator</code> using lazy initialization and provided on demand through getter methods.</p></li></ul></li><li class="list__item" id="z57zzoa_33"><p id="z57zzoa_47"><span class="control" id="z57zzoa_49">Network Management:</span></p><ul class="list _bullet" id="z57zzoa_48"><li class="list__item" id="z57zzoa_50"><p>Manages the <code class="code" id="z57zzoa_51">NetworkManager</code> to provide information about the network state and status.</p></li></ul></li></ul></section><section class="chapter"><h3 id="key-methods" data-toc="key-methods">Key Methods</h3><ul class="list _bullet" id="z57zzoa_52"><li class="list__item" id="z57zzoa_54"><p><span class="control" id="z57zzoa_56">Getters for Dependencies:</span> Methods like <code class="code" id="z57zzoa_57">obtainHomelessRepository()</code> or <code class="code" id="z57zzoa_58">obtainVolunteerViewModel()</code> return the corresponding initialized instances.</p></li><li class="list__item" id="z57zzoa_55"><p><span class="control" id="z57zzoa_59">Data Fetching:</span> The <code class="code" id="z57zzoa_60">fetchAllData()</code> method simplifies fetching of all necessary data by invoking the <code class="code" id="z57zzoa_61">fetch</code> methods of the respective view models.</p></li></ul></section></section><section class="chapter"><h2 id="integration-in-the-application" data-toc="integration-in-the-application">Integration in the Application</h2><section class="chapter"><h3 id="compositionlocalprovider" data-toc="compositionlocalprovider"><code class="code" id="z57zzoa_68">CompositionLocalProvider</code></h3><p id="z57zzoa_65">To integrate the <code class="code" id="z57zzoa_69">ServiceLocator</code> into Jetpack Compose, it is provided via a <code class="code" id="z57zzoa_70">CompositionLocalProvider</code>:</p><div class="code-block" data-lang="kotlin">
CompositionLocalProvider(LocalServiceLocator provides serviceLocator) {
    // Your Composable content
}
</div><p id="z57zzoa_67">This allows the <code class="code" id="z57zzoa_71">ServiceLocator</code> to be accessed throughout the composable hierarchy using the <code class="code" id="z57zzoa_72">LocalServiceLocator</code>.</p></section><section class="chapter"><h3 id="composition-local-definition" data-toc="composition-local-definition">Composition Local Definition</h3><p id="z57zzoa_73">The <code class="code" id="z57zzoa_77">LocalServiceLocator</code> is defined as:</p><div class="code-block" data-lang="kotlin">
val LocalServiceLocator = compositionLocalOf&lt;ServiceLocator&gt; {
    error(&quot;ServiceLocator not provided&quot;)
}
</div><p id="z57zzoa_75">This ensures that any attempt to access <code class="code" id="z57zzoa_78">LocalServiceLocator</code> without a proper provider will result in an error, promoting safe usage.</p></section></section><section class="chapter"><h2 id="benefits-of-the-service-locator-pattern" data-toc="benefits-of-the-service-locator-pattern">Benefits of the Service Locator Pattern</h2><section class="chapter"><h3 id="advantages" data-toc="advantages">Advantages</h3><ul class="list _bullet" id="z57zzoa_81"><li class="list__item" id="z57zzoa_82"><p><span class="control" id="z57zzoa_85">Centralized Management:</span> All dependencies are defined and managed in a single place, reducing redundancy.</p></li><li class="list__item" id="z57zzoa_83"><p><span class="control" id="z57zzoa_86">Flexibility:</span> Changes to dependency initialization (e.g., switching implementations) can be done in one place.</p></li><li class="list__item" id="z57zzoa_84"><p><span class="control" id="z57zzoa_87">Simplifies Testing:</span> Mock dependencies can be injected into the <code class="code" id="z57zzoa_88">ServiceLocator</code> for testing purposes.</p></li></ul></section><section class="chapter"><h3 id="limitations" data-toc="limitations">Limitations</h3><ul class="list _bullet" id="z57zzoa_89"><li class="list__item" id="z57zzoa_91"><p><span class="control" id="z57zzoa_93">Tight Coupling:</span> Components directly depend on the <code class="code" id="z57zzoa_94">ServiceLocator</code>, which can make refactoring or scaling harder compared to frameworks like Hilt.</p></li><li class="list__item" id="z57zzoa_92"><p><span class="control" id="z57zzoa_95">Manual Initialization:</span> Developers must ensure that the <code class="code" id="z57zzoa_96">ServiceLocator</code> is properly initialized, as failing to do so will result in runtime exceptions.</p></li></ul></section></section><section class="chapter"><h2 id="usage-example" data-toc="usage-example">Usage Example</h2><p id="z57zzoa_97">Here is a high-level example of how dependencies are provided and accessed:</p><section class="chapter"><h3 id="initialization-in-application-class" data-toc="initialization-in-application-class">Initialization in Application Class</h3><div class="code-block" data-lang="kotlin">
class MyApplication : Application() {
    override fun onCreate() {
        super.onCreate()
        ServiceLocator.initialize(this, FirebaseFirestore.getInstance())
    }
}
</div></section><section class="chapter"><h3 id="using-dependencies-in-composables" data-toc="using-dependencies-in-composables">Using Dependencies in Composables</h3><div class="code-block" data-lang="kotlin">
@Composable
fun HomelessScreen() {
    val serviceLocator = LocalServiceLocator.current
    val homelessViewModel = serviceLocator.obtainHomelessViewModel()

    // Use the view model in the composable
    // ...
}
</div></section></section><section class="chapter"><h2 id="conclusion" data-toc="conclusion">Conclusion</h2><p id="z57zzoa_103">The <code class="code" id="z57zzoa_105">ServiceLocator.kt</code> file provides a robust and flexible solution for managing dependency injection in the VociApp project. While it requires more manual setup and management compared to using Hilt, it aligns with the project constraints and effectively simplifies dependency management across the app.</p><p id="z57zzoa_104">This approach demonstrates a good understanding of software design patterns and offers a practical alternative when external frameworks cannot be used.</p></section><div class="last-modified">Last modified: 16 January 2025</div><div data-feedback-placeholder="true"></div><div class="navigation-links _bottom"><a href="di-package.html" class="navigation-links__prev">Dependency Injection (DI) [Package]</a><a href="ui-package.html" class="navigation-links__next">User Interface (UI) [Package]</a></div></article><div id="disqus_thread"></div></div></section></main></div><script src="https://resources.jetbrains.com/writerside/apidoc/6.10.0-b575/app.js"></script></body></html>